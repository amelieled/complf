# CompLF

This is an implementation of a theory-agnostic bidirectional typing algorithm for the mode-correct moded theories of CompLF.

CompLF is a logical framework suitable for defining computational theories (whose definitional equality is purely generated by rewriting). A key feature of CompLF is the possibility for marking arguments of symbols as erased, which allows for instance to write $\langle t, u \rangle$ instead of $\langle t, u\rangle_{A, x.B}$, making it possible to represent the non-annotated syntaxes that one is used to in type theory. Note that, differently from what happens for instance in Coq, these arguments are *not* reconstructed internally: the real syntax is the one the user sees (modulo the deBruijn indices). 

Because of erased arguments, typing a term in CompLF is a non-trivial and many times undecidable task. To address this problem, I have designed a theory-agnostic bidirectional typing algorithm for CompLF, which can be instantiated by giving modes to a CompLF theory in a "mode-correct" way. Assuming that the theory is confluent and satisfies subject reduction, then the algorithm is sound, and furthermore if the theory is also terminating, then the algorithm is also complete for the "well-moded" terms. The definition of such terms depends on the modes assigned to the theory, for instance if all constants are inferable (that is, annotated with +) then all terms are well-moded, and for all theories in `tests/` at least the normal forms are well-moded. 
 
## How to use

The file `test/quick_intro.complf` gives an introduction to CompLF. You can run `make test` in order to see the output it produces. If you want a more detailed introduction, look at the file `test/intro.complf` which explains a bit more some technical parts. The full definition of CompLF, its metatheory, the bidirectional typing algorithm, and its soundness and correctness proofs are the subject of an article currently in preparation. A link will be added here as soon as it becomes available.

## Implementation

The implementation of rewriting uses a form of NbE and is inspired by the following works.

- https://github.com/jozefg/nbe-for-mltt/blob/master/src/lib/nbe.ml
- https://github.com/martinescardo/HoTTEST-Summer-School/blob/main/Colloquia/Sterling/tutorial/lib/Eval.ml
- A simple type-theoretic language: Mini-TT



